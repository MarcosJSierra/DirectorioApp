{"remainingRequest":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/src/components/RadianceApp/Users.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/src/components/RadianceApp/Users.vue","mtime":1636780412315},{"path":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/node_modules/css-loader/index.js","mtime":1636780411612},{"path":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1636780412075},{"path":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/node_modules/cache-loader/dist/cjs.js","mtime":1636780411522},{"path":"/home/marcos/Documents/Desarrollo_web/DirectorioFront/DirectorioApp/node_modules/vue-loader/lib/index.js","mtime":1636780412075}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.card-title {\n  padding: 0px 0px;\n}\nh3.format {\n  font-family: \"Montserrat\" !important;\n  font-size: 18px !important;\n  margin: 32px 0px !important;\n  color: #8a8a8a !important;\n  font-weight: 500 !important;\n}\n",{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components/RadianceApp","sourcesContent":["<template>\n  <v-container ma-0 pa-0 fluid>\n    <v-layout class=\"pt-12\">\n      <v-card color=\"grey darken-4\" dark>\n        <v-card-title class=\"mx-6\"\n          ><v-icon large class=\"mx-3\">mdi-account-multiple </v-icon>Usuarios</v-card-title\n        >\n      </v-card>\n    </v-layout>\n    <v-container fluid fill-height>\n      <v-layout child-flex>\n        <v-data-table\n          :headers=\"headers\"\n          :items=\"users\"\n          :loading=\"loading\"\n          loading-text=\"Cargando... Por favor espere\"\n          class=\"elevation-6\"\n          :footer-props=\"{\n            'items-per-page-text': 'Usuarios por página',\n            'items-per-page-all-text': 'Todos',\n            'page-text': '{0}-{1} de {2}',\n          }\"\n        >\n          <template v-slot:top>\n            <v-card elevation=\"0\">\n              <v-dialog v-model=\"dialog\" max-width=\"500px\">\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-layout justify-end>\n                    <v-btn\n                      class=\"ma-6\"\n                      color=\"grey darken-4\"\n                      dark\n                      x-large\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      >Nuevo Usuario</v-btn\n                    >\n                  </v-layout>\n                </template>\n                <v-card>\n                  <v-card-title>\n                    <span class=\"text-h5\">{{ formTitle }}</span>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-container>\n                      <h3 class=\"format\">Datos personales</h3>\n                      <v-text-field\n                        label=\"Nombres y Apellidos\"\n                        placeholder=\"Nombres y Apellidos\"\n                        name=\"name\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.name\"\n                      >\n                      </v-text-field>\n                      <v-text-field\n                        label=\"Correo electrónico\"\n                        placeholder=\"Correo electrónico\"\n                        name=\"email\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.mail\"\n                      >\n                      </v-text-field>\n                      <v-text-field\n                        label=\"Teléfono\"\n                        placeholder=\"Teléfono\"\n                        name=\"phone\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.phoneNumber\"\n                      >\n                      </v-text-field>\n                      <h3 class=\"format\">Datos del usuario</h3>\n                      <v-text-field\n                        label=\"Usuario\"\n                        placeholder=\"Usuario\"\n                        name=\"username\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.user\"\n                      >\n                      </v-text-field>\n                      <v-text-field\n                        :type=\"showPassword ? 'text' : 'password'\"\n                        id=\"password\"\n                        label=\"Contraseña\"\n                        placeholder=\"Contraseña\"\n                        name=\"password\"\n                        solo\n                        color=\"#F37154\"\n                        v-model=\"editedItem.password\"\n                        :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                        @click:append=\"showPassword = !showPassword\"\n                      ></v-text-field>\n                      <h3 class=\"format\">Datos de la suscripción</h3>\n                      <v-subheader>Tipo de suscripción</v-subheader>\n                      \n                      <v-row class=\"py-3\">\n                        <v-autocomplete\n                          v-model=\"editedItem.subscriptionType\"\n                          :items=\"suscriptionTypes\"\n                          solo\n                          chips\n                          color=\"deep-orange lighten-3\"\n                          item-text=\"name\"\n                          return-object\n                        >\n                        </v-autocomplete>\n                      </v-row>\n                      <span>{{\"span\"}}{{editedItem}}</span>\n                      <h3 class=\"format\">Datos de pago</h3>\n                      <v-text-field\n                        label=\"Número de tarjeta crédito/débito\"\n                        placeholder=\"XXXX XXXX XXXX XXXX\"\n                        name=\"username\"\n                        type=\"number\"\n                        solo\n                        v-model=\"editedItem.card\"\n                      >\n                      </v-text-field>\n                      <v-text-field\n                        label=\"Fecha de expiración\"\n                        placeholder=\"MM/YY\"\n                        name=\"username\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.expirationDate\"\n                      >\n                      </v-text-field>\n                      <v-text-field\n                        label=\"CVC\"\n                        placeholder=\"CVC\"\n                        name=\"username\"\n                        type=\"text\"\n                        solo\n                        v-model=\"editedItem.card\"\n                      >\n                      </v-text-field>\n                    </v-container>\n                  </v-card-text>\n                  <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn depressed @click=\"close\"> Cancelar </v-btn>\n                    <v-btn\n                      depressed\n                      color=\"primary\"\n                      :loading=\"loading\"\n                      @click=\"save(editedItem)\"\n                    >\n                      Guardar\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </v-dialog>\n            </v-card>\n          </template>\n          <template v-slot:item.actions=\"{ item }\">\n            <v-icon small class=\"mr-2\" @click=\"editItem(item)\"> mdi-pencil </v-icon>\n          </template>\n          <template v-slot:no-data>\n            <span\n              >La lista de usuarios esta vacía. Agrega un usuario para verlo en\n              la lista.</span\n            >\n          </template>\n        </v-data-table>\n      </v-layout>\n    </v-container>\n  </v-container>\n</template>\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Users\",\n  data: () => ({\n    loading: true,\n    dialog: false,\n    showPassword: false,\n    headers: [\n      {\n        text: \"Nombre\",\n        align: \"center\",\n        value: \"name\",\n      },\n      { text: \"Email\", align: \"center\", value: \"mail\", sortable: false },\n      { text: \"Teléfono\", align: \"center\", value: \"phoneNumber\", sortable: false },\n      { text: \"Role\", align: \"center\", value: \"role\", sortable: false },\n      { text: \"Actions\", align: \"center\", value: \"actions\", sortable: false },\n    ],\n    users: [],\n    suscriptionTypes: [],\n    editedIndex: -1,\n    editedItem: {\n      userId: \"\",\n      name: \"\",\n      mail: \"\",\n      phoneNumber: \"\",\n      role: \"\",\n      image: \"\",\n      user: \"\",\n      password: \"\",\n      isVerified: \"\",\n      subscriptionType: null,\n    },\n    defaultItem: {\n      userId: \"\",\n      name: \"\",\n      mail: \"\",\n      phoneNumber: \"\",\n      role: \"\",\n      image: \"\",\n      user: \"\",\n      password: \"\",\n      isVerified: \"\",\n      subscriptionType: null,\n    },\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"Nuevo Usuario\" : \"Editar Usuario\";\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    },\n  },\n\n  created() {\n    this.initialize();\n  },\n\n  methods: {\n    initialize() {\n      this.loading = true;\n      axios.get(\"subscriptiontype/\").then((response) => {\n        if (response.status == 200) {\n          this.suscriptionTypes = response.data;\n        } else {\n          console.log(response.status);\n        }\n      });\n      axios.get(\"user/\").then((response) => {\n        if (response.status == 200) {\n          this.users = response.data.users;\n        } else {\n          console.log(response.status);\n        }\n      });\n      \n      this.loading = false;\n    },\n\n    editItem(item) {\n      this.editedIndex = this.users.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    deleteItem(item) {\n      this.editedIndex = this.users.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n\n    save(item) {\n      if (this.editedIndex == -1) {\n        console.log(item)\n        this.loading = true;\n        let json = {\n          name: item.name,\n          mail: item.mail,\n          phoneNumber: item.phoneNumber,\n          role: \"\",\n          image: \"\",\n          user: item.user,\n          password: item.password,\n          isVerified: \"\",\n          subscription: {\n            finalizationDate: \"\",\n            status: \"\",\n            subscriptionType: {\n              subscriptionTypeId: item.subscriptionType.subscriptionTypeId,\n              name: item.subscriptionType.name,\n              price: item.subscriptionType.price,\n              description: item.subscriptionType.description,\n            },\n          },\n        };\n        console.log(json);\n        axios.post(\"user/\", json).then((response) => {\n          if (response.status == 200) {\n            this.editedItem.subscriptionTypeId = response.data.subscriptionTypeId;\n            if (this.editedIndex > -1) {\n              Object.assign(this.users[this.editedIndex], this.editedItem);\n            } else {\n              this.users.push(this.editedItem);\n            }\n            this.loading = false;\n            let alert = {\n              alert: true,\n              alert_active: true,\n              alert_message: \"Usuario creado correctamente.\",\n              alert_color: \"success\",\n            };\n            this.$emit(\"chanceAlert\", alert);\n\n            this.close();\n          } else {\n            console.log(response.status);\n            this.loading = false;\n            let alert = {\n              alert: true,\n              alert_active: true,\n              alert_message: \"Error al crear usuario. Intente de nuevo más tarde.\",\n              alert_color: \"error\",\n            };\n            this.$emit(\"chanceAlert\", alert);\n          }\n        });\n      }\n    },\n  },\n};\n</script>\n<style>\n.card-title {\n  padding: 0px 0px;\n}\nh3.format {\n  font-family: \"Montserrat\" !important;\n  font-size: 18px !important;\n  margin: 32px 0px !important;\n  color: #8a8a8a !important;\n  font-weight: 500 !important;\n}\n</style>\n"]}]}